\subsubsection{Solutions of Certain Language Equations}\label{subsubsec:solutions-of-certain-language-equations}

Given a regular expression, we can form an NFA which admits the same language by solving \textbf{Language Equations}. We show the following lemma before proceeding to examples:

\begin{lemma}
      If $X=L\cdot X\cup M$ then $X=L^*\cdot M$ is a solution, and is unique if $\varepsilon\not\in L$. 
\end{lemma}

\begin{proof}
      Clearly, $L^*\cdot M$ is a solution, since \[L^*\cdot M = L\cdot (L^*\cdot M)\cup M\]. To prove uniqueness, suppose $s_1$ and $s_2$ are distinct solutions. There must exist a shortest-length string in $s_1$, say $s$. 
\end{proof}

Consider the following NFA:

\begin{center}\begin{tabular}{r| c c r}
      & $a$ & $b$ & \\\hline
      $\to 1$ & 2 & 1, 3 & 0\\
            2 & $\emptyset$ & 3 & 0\\
            3 & 2, 3 & 1 & 1
 \end{tabular}\end{center}

This admits the following set of equations 

\begin{align}
      X_1 &= aX_2\cup bX_1\cup bX_3\\
      X_2 &= bX_3\\
      X_3 &= aX_2\cup aX_3\cup bX_1\cup\varepsilon
\end{align}

We substitute (2) into (1) and (3):

\begin{align*}
      X_1 &= abX_3\cup bX_1\cup bX_3\\
      X_3 &= abX_3\cup aX_3\cup bX_1\cup\varepsilon
\end{align*}

which we rewrite as

\begin{align*}
      X_1 &= (ab\cup b)X_3\cup bX_1\\
      X_3 &= (ab\cup a)X_3\cup bX_1\cup\varepsilon
\end{align*}

We now apply our lemma to the equation for $X_3$

\begin{align*}
      X_1 &= (ab\cup b)X_3\cup bX_1\\
      X_3 &= (ab\cup a)^*(bX_1\cup\varepsilon)
\end{align*}

We substitute $X_3$ into the equation for $X_1$

\begin{align*}
      X_1&=(ab\cup b)(ab\cup a)^*(bX_1\cup\varepsilon)\cup bX_1\\
         &=\left((ab\cup b)(ab\cup a)^*\cup b\right)X_1\cup (ab\cup b)(ab\cup a)^*\cup bX_1\\
         &=\left((ab\cup b)(ab\cup a)^*\cup b\right)X_1\cup (ab\cup b)(ab\cup a)^*\\
         &=\left((ab\cup b)(ab\cup a)^*\cup b\right)^*(ab\cup b)(ab\cup a)^*
\end{align*}

Consider the example:

\begin{center}\begin{tabular}{r| c c r}
      & $a$ & $b$ & \\\hline
      $\to 1$ & 2 & 3 & 0\\
            2 & 2 & 3 & 0\\
            3 & 2 & 3 & 1
 \end{tabular}\end{center}

 This admits the following system of equations:

 \begin{align*}
      X_1 &= aX_2\cup bX_3\\
      X_2 &= aX_2\cup bX_3\\
      X_3 &= aX_2\cup bX_3\cup\varepsilon
\end{align*}

From our lemma, we have $X_2=a^*bX_3$:

\begin{align*}
      X_1 &= aa^*bX_3\cup bX_3\\
      X_3 &= aa^*bX_3\cup bX_3\cup\varepsilon
\end{align*}

which can be simplified:

\begin{align*}
      X_1 &= (aa^*b\cup b)X_3\\
      X_3 &= (aa^*b\cup b)X_3\cup\varepsilon
\end{align*}

Applying our lemma to $X_3$, we have \[X_3=(aa^*b\cup b)^*\] Subsituting into $X_1$ gives \[X_1=(aa^*b\cup b)(aa^*b\cup b)^*\] 

One final example:

\begin{center}\begin{tabular}{r| c c r}
      & $a$ & $b$ & \\\hline
      $\to 1$ & $\emptyset$ & 1, 2 & 1\\
            2 & 1 & $\emptyset$ & 1\\
 \end{tabular}\end{center}

\begin{align*}
      X_1 &= bX_1\cup bX_2\cup\varepsilon\\
      X_2 &= aX_1\cup\varepsilon
\end{align*}

Substituting our equation for $X_2$ into $X_1$ gives 

\begin{align*}
      X_1&=bX_1\cup b(aX_1\cup\varepsilon)\cup\varepsilon\\
         &=(b\cup ba)X_1\cup b\cup\varepsilon\\
         &=(b\cup ba)^*(b\cup\varepsilon)
\end{align*}

